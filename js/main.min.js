window.refreshPersonInfo=null,window.refreshInfo=null,window.refreshTime=null,window.js_currTime=0,$(function(){function r(){$(".buy-loading").show(),$("html body").addClass("stop")}function i(){$(".buy-loading").hide(),$("html body").removeClass("stop")}function n(t,e){return e||(e=3),(t=String(t).split("."))[0]=t[0].replace(new RegExp("(\\d)(?=(\\d{"+e+"})+$)","ig"),"$1,"),t.join(".")}function a(t){return n(c(472,t).toFixed(2))}function o(){$("#vanity").removeClass("show")}function s(t){xyj._timer&&clearInterval(xyj._timer),xyj._time=t,xyj._timer=setInterval(function(){var t,e,n=(t=xyj._time,[e=Math.floor(t/3600),Math.floor((t-3600*e)/60),(t-3600*e)%60]);!function(t,e,n){function a(t){return parseInt(t,10)<10?"0"+t.toString():t}if(t<0)return $(".headtimer").text(_("想开启新的轮回吗？")),$("header .lottery_time, .lottery_time p").text(_("本回合已结束")),$(".js_buy").addClass("isOver"),$(".js_buy .js_buy_text").text(_("现在购买1颗金钻，您将激活新一回合的游戏！")),clearInterval(xyj._timer),xyj._timer=null;$(".js_buy").removeClass("isOver"),$(".js_buy .js_buy_text").text(_("快速购买一颗金钻，赢得超级奖池！")),$(".headtimer, header .lottery_time").text(a(t)+":"+a(e)+":"+a(n)),$(".lottery_time p").text(a(t)+_(":")+a(e)+_(":")+a(n))}(n[0],n[1],n[2]),xyj._time--},1500)}function c(t,e){var n=0,a=t.toString(),r=e.toString();try{n+=a.split(".")[1].length}catch(t){}try{n+=r.split(".")[1].length}catch(t){}return Number(a.replace(".",""))*Number(r.replace(".",""))/Math.pow(10,n)}function u(t,e){var n=0,a=0;try{n=t.toString().split(".")[1].length}catch(t){}try{a=e.toString().split(".")[1].length}catch(t){}return Number(t.toString().replace(".",""))/Number(e.toString().replace(".",""))*Math.pow(10,a-n)}function l(t){return u(Math.floor(c(Number(t),Math.pow(10,6))),Math.pow(10,6))}function d(t){return u(Math.floor(c(Number(t),Math.pow(10,4))),Math.pow(10,4))}function m(t){return u(Math.floor(c(Number(t),Math.pow(10,3))),Math.pow(10,3))}function h(t){return u(Math.floor(c(Number(t),Math.pow(10,2))),Math.pow(10,2))}function e(){xyj.iWantXKeys(xyj._keyNums,function(t,e){var n;t||(xyj._allPrice=Number(e),$("#ethCount").text("@ "+(n=e,u(Math.floor(c(Number(n),Math.pow(10,8))),Math.pow(10,8))).toString()+" ETH"))})}function y(t){t&&t(),e()}function f(){var t,e=window.location.pathname.slice(1);return""===e?(t="addr",e="0xfd76dB2AF819978d43e07737771c8D9E8bd8cbbF"):32<e.length?t="addr":isNaN(Number(e))?t="name":(t="id",e=Number(e)),{type:t,str:e}}$("#jumpToContact").click(function(){window.open("https://etherscan.io/address/"+contractAddr+"#code")}),$(".js_jumpToEdu").click(function(){"zh"===global_lan?window.open("../edu_zh.pdf"):window.open("../edu_en.pdf")}),$(".team-grid .tabs .tab-title span").click(function(){$(".team-grid .tabs .tab-title span").removeClass("active"),$(this).addClass("active"),$(".team-grid .tabs .tab-content").removeClass("active"),$(".team-grid .tabs .tab-content").eq($(this).index()).addClass("active")}),$(".list-content .tabs .tab-title span").click(function(){$(".list-content .tabs .tab-title span").removeClass("active"),$(this).addClass("active"),$(".list-content .tabs .tab-content").removeClass("active"),$(".list-content .tabs .tab-content").eq($(this).index()).addClass("active")}),window.setInterval(function(){window.refreshTime()},1e4),window.formatNum6=l,xyj._keyNums=1,window.refreshTime=function(){xyj.getTimeLeft(function(t,e){t?console.log(t):(console.log(e),e.toString()===js_currTime.toString()&&"0"!==e.toString()||s(0===(js_currTime=e)?-1:e))})},window.refreshTime(),$("#count").on("input",function(){var t=Number($(this).val());0===t||isNaN(t)?xyj._keyNums=1:xyj._keyNums=t,e()}),$("#count").keyup(function(){var t=Number($(this).val());0===t||isNaN(t)?xyj._keyNums=1:xyj._keyNums=t,e()}),$(".count-container").on("click",".count-wrapper",function(){var t=Number($(this).attr("data-num"));0===t||isNaN(t)||(xyj._keyNums=xyj._keyNums+parseInt(t,10),$("#count").val(xyj._keyNums),e())}),y(),xyj._keyPriceTimer=setInterval(function(){y()},1e4),$(".team-container").on("click",".team-wrapper",function(){$(".team-wrapper").removeClass("team-wrapper--checked"),$(this).addClass("team-wrapper--checked");var t={shifu:0,wukong:2,bajie:3,shaseng:1}[$(this).attr("data-team")];xyj._team=t}),xyj._team=2,window.refreshPersonInfo=function(){p(function(n){xyj.getPlayerInfoByAddress(n,function(t,e){$(".js_noid, .js_hasid").addClass("hide"),t||(console.log(e),e&&""!==e.inviteName?($(".js_hasid").removeClass("hide"),$("#mylink").text("http://www.exitedscam.me/"+n),$("#idlink").text("http://www.exitedscam.me/"+("0"===e.id?"":e.id)),$("#namelink").text("http://www.exitedscam.me/"+encodeURIComponent(e.inviteName)),xyj._inviteName=e.inviteName):$(".js_noid").removeClass("hide"),$(".list-content .share-award").text(l(e.shareEarn).toString()+" ETH"),$(".team-grid .share-award").text(l(e.shareEarn).toString()),$(".list-content .owner-keys").text(e.keys.toString()+_(" 个")),y(function(){$(".team-grid .js_your_key").text(Number(e.keys))}),$(".list-content .total-award").text(l(e.totalEarn).toString()+" ETH"),$(".round-list .total-award-usdt").text("= "+a(e.totalEarn)),$(".team-grid .total-award-usdt").text("≙ "+a(e.totalEarn)+" USDT"),$(".team-grid .total-award").text(l(e.totalEarn).toString()))})},!0)},window.refreshPersonInfo(),$(".btn-buy, .js_buy").click(function(){var t=Number($("#count").val());$(this).hasClass("js_buy");isNaN(t)||0===parseInt($("#count").val(),10)||t!==parseInt(t,10)||t<0?alertify.alert("请输入正确的金钻数量"):p(function(t){if(t){r();var e=f();(0,{id:xyj.buyXid,addr:xyj.buyXaddr,name:xyj.buyXname}[e.type])(e.str,Number(xyj._team),xyj._allPrice,function(t,e){i(),t?alertify.error(_("已取消购买金钻")):alertify.success(_("下单成功"))})}})}),$(".js_btn_earn").click(function(){var t=Number($("#count").val());$(this).hasClass("js_buy");isNaN(t)||0===parseInt($("#count").val(),10)||t!==parseInt(t,10)||t<0?alertify.alert("请输入正确的金钻数量"):p(function(t){t&&xyj.getPlayerInfoByAddress(t,function(t,e){if(t)return!1;if(e&&parseFloat(e.totalEarn)<parseFloat(xyj._allPrice))return alertify.error(_("你的收益金额不足")),!1;console.log(xyj),r();var n=f();(0,{id:xyj.reLoadXid,addr:xyj.reLoadXaddr,name:xyj.reLoadXname}[n.type])(n.str,Number(xyj._team),xyj._allPrice,function(t,e){i(),t?alertify.error(_("已取消购买金钻")):alertify.success(_("下单成功"))})})})}),window.refreshInfo=function(){xyj.getCurrentRoundInfo(function(t,e){t||y(function(){"0"===d(e.currPot).toString()?$(".banner .msg3, .total_prize_pool").html("<p>0.0000</p>"):$(".banner .msg3, .total_prize_pool").html("<p>"+d(e.currPot).toString()+"</p>"),$(".list-content .js_wukong").text(d(e.sneks_2).toString()),$(".list-content .js_shifu").text(d(e.whales_0).toString()),$(".list-content .js_bajie").text(d(e.bulls_3).toString()),$(".list-content .js_shaseng").text(d(e.bears_1).toString()),$(".total-usdt").text("= "+a(e.currPot)+" USDT"),console.log(e.purchasedTime,h(e.purchasedTime)),$(".js_year").text(1<e.purchasedTime?h(e.purchasedTime).toString():d(e.purchasedTime).toString()),$(".js_second").text(n(e.purchasedSeconds)),$(".js_round").text(" "+e.roundNum)})})},window.refreshInfo(),xyj.getRound(function(t,e){t||($(".js_keys_value").text(m(e.totalEth)),$(".js_keys_usdt").text("≙ "+a(e.totalEth)),$(".js_dis_value").text(m(e.distributionEth)),$(".js_dis_usdt").text("≙ "+a(e.distributionEth)))}),$(".js_buyceo").click(function(){xyj._account&&""!==xyj._account?($("#vanity").addClass("show"),$("#nameInput").val("")):alertify.error(_("请先登陆您的Metamask钱包"))}),$("#vanity .col-auto").click(o),$("#namePurchase").click(function(){p(function(t){if(t){var e=f(),n=$.trim($("#nameInput").val());if((a=n).length<=32&&/^[a-z0-9\-\s]+$/.test(a)&&!/^[0-9]+$/.test(a)&&-1===a.indexOf("  "))r(),(0,{id:xyj.registerNameXID,addr:xyj.registerNameXaddr,name:xyj.registerNameXname}[e.type])(n,e.str,function(t){i(),t?alertify.error(_("已取消注册推广代号")):(o(),alertify.success(_("下单成功")))});else alertify.alert(_("输入的推广代号不符合规则"))}var a})}),$("#randomName").click(function(){var t,e,n;$("#nameInput").val((n=["adamant","adroit","amatory","animistic","antic","arcadian","baleful","bellicose","bilious","boorish","calamitous","caustic","cerulean","comely","concomitant","contumacious","corpulent","crapulous","defamatory","didactic","dilatory","dowdy","efficacious","effulgent","egregious","endemic","equanimous","execrable","fastidious","feckless","fecund","friable","fulsome","garrulous","guileless","gustatory","harjd","heuristic","histrionic","hubristic","incendiary","insidious","insolent","intransigent","inveterate","invidious","irksome","jejune","jocular","judicious","lachrymose","limpid","loquacious","luminous","mannered","mendacious","meretricious","minatory","mordant","munificent","nefarious","noxious","obtuse","parsimonious","pendulous","pernicious","pervasive","petulant","platitudinous","precipitate","propitious","puckish","querulous","quiescent","rebarbative","recalcitant","redolent","rhadamanthine","risible","ruminative","sagacious","salubrious","sartorial","sclerotic","serpentine","spasmodic","strident","taciturn","tenacious","tremulous","trenchant","turbulent","turgid","ubiquitous","uxorious","verdant","voluble","voracious","wheedling","withering","zealous"],(e=["ninja","truce","harj","finney","szabo","gwei","laser","justo","satoshi","mantso","3D","inventor","theShocker","aritz","sumpunk","cryptoknight","randazz","kadaz","daok","shenron","notreally","thecrypt","stick figures","mermaid eggs","sea barnacles","dragons","jellybeans","snakes","dolls","bushes","cookies","apples","ice cream","ukulele","kazoo","banjo","opera singer","circus","trampoline","carousel","carnival","locomotive","hot air balloon","praying mantis","animator","artisan","artist","colorist","inker","coppersmith","director","designer","flatter","stylist","leadman","limner","make-up artist","model","musician","penciller","producer","scenographer","set decorator","silversmith","teacher","auto mechanic","beader","bobbin boy","clerk of the chapel","filling station attendant","foreman","maintenance engineering","mechanic","miller","moldmaker","panel beater","patternmaker","plant operator","plumber","sawfiler","shop foreman","soaper","stationary engineer","wheelwright","woodworkers"])[(t=function(t){return Math.floor(Math.random()*t.length)})(e)]+" "+n[t(n)]))}),$(".js_withdraw").click(function(){xyj._account&&""!==xyj._account?(r(),xyj.withdraw(function(t,e){t?alertify.error(_("提现已取消")):alertify.success(_("下单成功")),i(),console.log("提现",t,e)})):alertify.error(_("请先登陆您的Metamask钱包"))}),$(".js_share").click(function(){$("#sharing-rewards span").eq(2).click(),xyj._account&&""!==xyj._account||alertify.error(_("请先登陆您的Metamask钱包"))}),new ClipboardJS(".js_copy_btn").on("success",function(){alertify.success(_("复制成功"))});function p(n,a){xyj.getAccounts(function(t,e){xyj._account=e,!t&&""!==e||!0===a?n(e):!function(){for(var t=window.navigator.userAgent,e=["Android","iPhone","SymbianOS","Windows Phone","iPad","iPod"],n=!0,a=0;a<e.length;a++)if(0<t.indexOf(e[a])){n=!1;break}return n}()?-1<window.navigator.userAgent.indexOf("Trust")||-1<window.navigator.userAgent.indexOf("Cipher")||-1<window.navigator.userAgent.indexOf("Toshi")||$(".js_showMobile").removeClass("hide"):$(".js_showPc").removeClass("hide")})}});